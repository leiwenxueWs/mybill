<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.biz.SpeciesBizMapper">
  <resultMap id="BaseResultMap" type="com.model.auto.Species">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Apr 20 10:03:02 CST 2019.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="species_number" jdbcType="BIGINT" property="speciesNumber" />
    <result column="account_number" jdbcType="BIGINT" property="accountNumber" />
    <result column="species_name" jdbcType="VARCHAR" property="speciesName" />
    <result column="species_type" jdbcType="INTEGER" property="speciesType" />
    <result column="creator" jdbcType="BIGINT" property="creator" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="isdel" jdbcType="BIT" property="isdel" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Apr 20 10:03:02 CST 2019.
    -->
    id, species_number, account_number, species_name, species_type, creator, create_time,
    update_time, isdel
  </sql>

  <select id="getSpeciesByAccountNumberAndType" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List"/>
    FROM bill.species
    WHERE account_number = #{accountNumber}
    AND species_type = #{type}
    AND isdel = 0;
  </select>

  <select id="selectDelSystemSpecies" resultMap="BaseResultMap">
    SELECT
    <include refid="Base_Column_List"/>
    FROM bill.species
    WHERE account_number = #{accountNumber}
    AND species_type = #{type}
    AND isdel = 1
    AND creator = 10000;
  </select>
  <insert id="batchInsertSpecies">
    INSERT INTO bill.species (species_number,account_number,species_name,species_type,creator)
    VALUES
    <foreach collection="items" separator="," item="item">
      (#{item.speciesNumber},#{item.accountNumber},#{item.speciesName},#{item.speciesType},#{item.creator})
    </foreach>
  </insert>
  <update id="deleteSpecies">
    UPDATE bill.species SET isdel = 1 where species_number = #{speciesNumber}
  </update>
</mapper>